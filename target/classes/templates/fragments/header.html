<header th:fragment="header"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <div class="rn-header">
    <div class="rn-header-left">
      <a class="rn-logo" th:href="@{/}">RealNest</a>
    </div>
    <nav class="rn-header-center" aria-label="Primary navigation">
      <ul class="rn-nav-list">
        <li><a class="rn-nav-link" th:href="@{/properties}">Browse</a></li>
        <li sec:authorize="isAuthenticated()">
          <a class="rn-nav-link" th:href="@{/dashboard/me}">My List</a>
        </li>
        <li sec:authorize="hasRole('ADMIN')">
          <a class="rn-nav-link" th:href="@{/admin/dashboard}">Admin</a>
        </li>
        <li sec:authorize="hasRole('ADMIN')">
          <a class="rn-nav-link" th:href="@{/admin/customers}">Customers</a>
        </li>
        <li sec:authorize="hasRole('ADMIN')">
          <a class="rn-nav-link" th:href="@{/admin/enquiries}">Enquiries</a>
        </li>
        <li sec:authorize="hasRole('ADMIN')">
          <a class="rn-nav-link" th:href="@{/admin/users}">Users</a>
        </li>
        <li sec:authorize="hasRole('ADMIN')">
          <a class="rn-nav-link" th:href="@{/admin/approvals}">Approvals</a>
        </li>
        <li sec:authorize="isAuthenticated()">
          <a class="rn-nav-link" th:href="@{/properties/new}">Add Listing</a>
        </li>
        <li sec:authorize="isAuthenticated()">
          <a class="rn-nav-link" th:href="@{/user/profile}">Profile</a>
        </li>
      </ul>
    </nav>
    <div class="rn-header-right">
      <div class="rn-user" sec:authorize="isAuthenticated()">
        <span class="rn-badge-text">Signed in as</span>
        <strong class="rn-user-email" th:text="${#authentication.principal.username}">
          user@example.com
        </strong>
      </div>
      <form th:action="@{/logout}"
            method="post"
            class="rn-logout-form"
            sec:authorize="isAuthenticated()">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button type="submit" class="rn-btn rn-btn-outline">Logout</button>
      </form>
      <div class="rn-auth-actions" sec:authorize="!isAuthenticated()">
        <a class="rn-btn rn-btn-outline" th:href="@{/login}">Login</a>
        <a class="rn-btn rn-btn-primary" th:href="@{/register}">Register</a>
      </div>
    </div>
  </div>
</header>
